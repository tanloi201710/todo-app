{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _Device = require('../Device');\n\nvar _Device2 = _interopRequireDefault(_Device);\n\nvar _logger = require('../logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar logger = new _logger2.default('SSO.LinkedIn');\nvar default_options = {\n  api_key: null,\n  script: 'http://platform.linkedin.com/in.js?async=true'\n  /**\n  * Reference: https://developer.linkedin.com/docs/getting-started-js-sdk\n  */\n\n};\n\nvar LinkedIn = function () {\n  function LinkedIn(options) {\n    _classCallCheck(this, LinkedIn);\n\n    if (typeof options === 'string') {\n      options = {\n        api_key: options\n      };\n    }\n\n    this._options = Object.assign({}, default_options, options);\n\n    if (!this._options.api_key) {\n      logger.warn('missing api_key');\n    }\n\n    this.signIn = this.signIn.bind(this);\n    this.signOut = this.signOut.bind(this);\n    this.check = this.check.bind(this);\n    this.ready = this.ready.bind(this);\n    this._user = this._user.bind(this);\n    this._initIn = this._initIn.bind(this);\n    this._fullyLoaded = this._fullyLoaded.bind(this);\n    this._IN = null;\n    this._INLoaded = false;\n\n    this._createScript();\n  }\n\n  _createClass(LinkedIn, [{\n    key: 'signIn',\n    value: function signIn() {\n      var IN = this._IN;\n\n      if (!IN) {\n        return Promise.reject('no IN instance');\n      }\n\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        IN.User.authorize(function () {\n          that._user().then(function (user) {\n            return resolve(user);\n          }).catch(function (err) {\n            return reject(err);\n          });\n        });\n      });\n    }\n  }, {\n    key: 'signOut',\n    value: function signOut() {\n      var IN = this._IN;\n\n      if (!IN) {\n        return Promise.reject('no IN instance');\n      }\n\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        IN.User.logout(function () {\n          logger.debug('signed out');\n          resolve();\n        });\n      });\n    }\n  }, {\n    key: 'check',\n    value: function check() {\n      var IN = this._IN;\n\n      if (!IN) {\n        return Promise.reject('no IN instance');\n      }\n\n      if (!IN.User.isAuthorized()) {\n        return Promise.reject('not authorized');\n      }\n\n      return this._user();\n    }\n  }, {\n    key: 'ready',\n    value: function ready() {\n      var api_key = this._options.api_key;\n\n      if (!api_key) {\n        return Promise.reject('missing api_key');\n      }\n\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        var checkCount = 0;\n\n        var checkIN = function checkIN() {\n          checkCount++;\n\n          if (that._IN && that._INLoaded) {\n            resolve();\n            return;\n          }\n\n          if (window.IN) {\n            that._initIn();\n\n            return;\n          }\n\n          if (checkCount < 5) {\n            window.setTimeout(checkIN, 500);\n          } else {\n            reject('timeout');\n          }\n        };\n\n        checkIN();\n      });\n    }\n  }, {\n    key: '_user',\n    value: function _user() {\n      var IN = this._IN;\n      return new Promise(function (resolve, reject) {\n        IN.API.Raw('/people/~').result(function (profile) {\n          var firstName = profile.firstName,\n              lastName = profile.lastName,\n              id = profile.id,\n              headline = profile.headline;\n          resolve({\n            id: id,\n            firstName: firstName,\n            lastName: lastName,\n            headline: headline\n          });\n        }).error(function (err) {\n          return reject(err);\n        });\n      });\n    }\n  }, {\n    key: '_createScript',\n    value: function _createScript() {\n      if (window.IN) {\n        this._initIn();\n      }\n\n      var script = this._options.script;\n\n      if (script === 'none') {\n        return;\n      }\n\n      window._in_onload = this._fullyLoaded;\n\n      _Device2.default.createScript(this._options.script, true, this._initIn);\n    }\n  }, {\n    key: '_initIn',\n    value: function _initIn() {\n      logger.debug('init IN');\n      var api_key = this._options.api_key;\n\n      if (!api_key) {\n        logger.warn('missing api_key');\n        return;\n      }\n\n      var IN = window.IN;\n      IN.init({\n        api_key: api_key,\n        authorize: true,\n        onLoad: \"_in_onload\"\n      });\n      this._IN = IN;\n    }\n  }, {\n    key: '_fullyLoaded',\n    value: function _fullyLoaded() {\n      logger.debug('fully loaded');\n      this._INLoaded = true;\n    }\n  }]);\n\n  return LinkedIn;\n}();\n\nexports.default = LinkedIn;","map":{"version":3,"sources":["/home/tanloi/Documents/React/todo-app/node_modules/fsts/lib/sso/LinkedIn.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_Device","require","_Device2","_interopRequireDefault","_logger","_logger2","obj","__esModule","default","_classCallCheck","instance","TypeError","logger","default_options","api_key","script","LinkedIn","options","_options","assign","warn","signIn","bind","signOut","check","ready","_user","_initIn","_fullyLoaded","_IN","_INLoaded","_createScript","IN","Promise","reject","that","resolve","User","authorize","then","user","catch","err","logout","debug","isAuthorized","checkCount","checkIN","window","setTimeout","API","Raw","result","profile","firstName","lastName","id","headline","error","_in_onload","createScript","init","onLoad"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Device = require('../Device');\n\nvar _Device2 = _interopRequireDefault(_Device);\n\nvar _logger = require('../logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = new _logger2.default('SSO.LinkedIn');\n\nvar default_options = {\n    api_key: null,\n    script: 'http://platform.linkedin.com/in.js?async=true'\n\n    /**\n    * Reference: https://developer.linkedin.com/docs/getting-started-js-sdk\n    */\n};\nvar LinkedIn = function () {\n    function LinkedIn(options) {\n        _classCallCheck(this, LinkedIn);\n\n        if (typeof options === 'string') {\n            options = { api_key: options };\n        }\n        this._options = Object.assign({}, default_options, options);\n        if (!this._options.api_key) {\n            logger.warn('missing api_key');\n        }\n\n        this.signIn = this.signIn.bind(this);\n        this.signOut = this.signOut.bind(this);\n        this.check = this.check.bind(this);\n        this.ready = this.ready.bind(this);\n\n        this._user = this._user.bind(this);\n        this._initIn = this._initIn.bind(this);\n        this._fullyLoaded = this._fullyLoaded.bind(this);\n\n        this._IN = null;\n        this._INLoaded = false;\n\n        this._createScript();\n    }\n\n    _createClass(LinkedIn, [{\n        key: 'signIn',\n        value: function signIn() {\n            var IN = this._IN;\n            if (!IN) {\n                return Promise.reject('no IN instance');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                IN.User.authorize(function () {\n                    that._user().then(function (user) {\n                        return resolve(user);\n                    }).catch(function (err) {\n                        return reject(err);\n                    });\n                });\n            });\n        }\n    }, {\n        key: 'signOut',\n        value: function signOut() {\n            var IN = this._IN;\n            if (!IN) {\n                return Promise.reject('no IN instance');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                IN.User.logout(function () {\n                    logger.debug('signed out');\n                    resolve();\n                });\n            });\n        }\n    }, {\n        key: 'check',\n        value: function check() {\n            var IN = this._IN;\n            if (!IN) {\n                return Promise.reject('no IN instance');\n            }\n\n            if (!IN.User.isAuthorized()) {\n                return Promise.reject('not authorized');\n            }\n\n            return this._user();\n        }\n    }, {\n        key: 'ready',\n        value: function ready() {\n            var api_key = this._options.api_key;\n\n            if (!api_key) {\n                return Promise.reject('missing api_key');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                var checkCount = 0;\n                var checkIN = function checkIN() {\n                    checkCount++;\n                    if (that._IN && that._INLoaded) {\n                        resolve();\n                        return;\n                    }\n\n                    if (window.IN) {\n                        that._initIn();\n                        return;\n                    }\n\n                    if (checkCount < 5) {\n                        window.setTimeout(checkIN, 500);\n                    } else {\n                        reject('timeout');\n                    }\n                };\n                checkIN();\n            });\n        }\n    }, {\n        key: '_user',\n        value: function _user() {\n            var IN = this._IN;\n            return new Promise(function (resolve, reject) {\n                IN.API.Raw('/people/~').result(function (profile) {\n                    var firstName = profile.firstName,\n                        lastName = profile.lastName,\n                        id = profile.id,\n                        headline = profile.headline;\n\n                    resolve({\n                        id: id,\n                        firstName: firstName,\n                        lastName: lastName,\n                        headline: headline\n                    });\n                }).error(function (err) {\n                    return reject(err);\n                });\n            });\n        }\n    }, {\n        key: '_createScript',\n        value: function _createScript() {\n            if (window.IN) {\n                this._initIn();\n            }\n\n            var script = this._options.script;\n\n            if (script === 'none') {\n                return;\n            }\n\n            window._in_onload = this._fullyLoaded;\n            _Device2.default.createScript(this._options.script, true, this._initIn);\n        }\n    }, {\n        key: '_initIn',\n        value: function _initIn() {\n            logger.debug('init IN');\n            var api_key = this._options.api_key;\n\n            if (!api_key) {\n                logger.warn('missing api_key');\n                return;\n            }\n\n            var IN = window.IN;\n            IN.init({\n                api_key: api_key,\n                authorize: true,\n                onLoad: \"_in_onload\"\n            });\n            this._IN = IN;\n        }\n    }, {\n        key: '_fullyLoaded',\n        value: function _fullyLoaded() {\n            logger.debug('fully loaded');\n            this._INLoaded = true;\n        }\n    }]);\n\n    return LinkedIn;\n}();\n\nexports.default = LinkedIn;"]},"metadata":{},"sourceType":"script"}